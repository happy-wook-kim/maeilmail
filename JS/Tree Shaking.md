## 트리 쉐이킹에 대해 설명해주세요.

트리 쉐이킹은 자바스크립트 번들 파일의 크기를 줄이기 위한 최적화 기법입니다.
빌드 과정에서 실제로 사용되지 않는 코드(Dead Code)를 식별하고 제거하여 최정 결과물에 필요한 코드만 포함시킵니다.
트리 쉐이킹이라는 이름은 나무를 흔들어 죽은 잎사귀를 떨어뜨리는 모습에서 유래했습니다.

### 작동 원리
#### ESM 기반 정적 분석
트리 쉐이킹은 **ESM(ES Modules)** 시스템을 기반으로 효과적으로 동작합니다.
ESM은 모듈 의존성을 정적으로 정의하므로 코드를 실행하기 전에 어떤 모듈이 사용되고 어떤 코드가 내보내지는지 분석할 수 있습니다.
Webpack, Rollup, Esbuild 같은 모던 번들러는 이러한 정적 구조를 활용해 사용되지 않는 코드를 쉽게 제거합니다.

#### CJS와의 차이
반면 **CJS(CommonJS)**와 같은 동적 모듈 시스템은 실행 시점에 모듈을 조건부로 불러옵니다.
이로 인해 빌드 시점의 정적 분석만으로는 코드 사용 여부를 정확히 판단하기 어려워 트리 쉐이킹이 제한적으로 적용되거나 동작하지 않을 수 있습니다.

### Side Effects와의 관계
#### 사이드 이펙트란?
사이드 이펙트는 모듈을 `import`하는 것만으로 애플리케이션의 다른 부분에 영향을 미치는 코드를 의미합니다.
예를 들어, 모듈 최상위 레벨에서 전역 변수를 수정하거나 console.log를 출력하거나 CSS를 주입하거나 특정 함수를 즉시 실행하는 코드 등이 해당됩니다.

#### 사이드 이펙트가 트리 쉐이킹에 미치는 영향
번들러는 특정 모듈의 `export`된 값이 사용되지 않더라도 해당 모듈에 사이드 이펙트가 있다고 판단하면 코드를 제거하지 않습니다.
이는 제거로 인해 예기치 않은 동작이 발생할 가능성을 방지하기 위함입니다.

사이드 이펙트를 최소화 하려면 순수 함수를 사용해 모듈 최상위 레벨에서 실행되는 코드를 피해야 합니다.
또는, `package.json`에서 플래그를 설정합니다.
```
{
  "sideEffects": false
  //또는
  "sideEffects": ["*.css", "sideEffectModule.js"]
}
```

### 결론
트리 쉐이킹은 번들 크기를 줄이고 성능을 최적화하는 데 유용한 기법입니다.
이를 효과적으로 활용하려면 ESM 기반으로 코드를 작성하고, 사이드 이펙트를 최소화하며, 번들러 설정을 최적화해야 합니다.
추가로 순수함수와 모듈 세분화를 통해 트리 쉐이킹의 효율성을 높일 수 있습니다.
