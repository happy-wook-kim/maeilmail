## 제로 런타임 css란 무엇인가요?

CSS(Cascading Style Sheets)는 웹 페이지의 시각적인 스타일과 레이아웃을 정의하기 위해 작성하는 코드입니다.
최근 몇 년간 프론트엔드 개발 방식 중 하나로 JS 코드 내에 CSS를 작성하고 관리하는 CSS-in-JS 기법이 많은 주목을 받았습니다.
대표적인 라이브러리로 `styled-components` `Emotion`등이 있습니다.

### CSS-in-JS
#### 동작 방식
CSS-in-JS는 **JavaScript 코드가 브라우저에서 실행될 때 런타임에 CSS 스타일 규칙을 동적으로 생성**합니다.
생성된 스타일을 `<style>`태그를 통해 문서의 CSSOM에 삽입합니다.

이러한 방식은 컴포넌트 아키택처인 리앩트에서 스타일의 관심사를 분리하고 JavaScript 변수를 활용해 동적으로 스타일링하며 중복 클래스명을 방지하는 등 여러 장점이 있지만 몇 가지 성능상의 한계점이 있었습니다.

#### 단점
* **런타임 오버헤드** : 브라우저가 페이지를 로드하고 사용자와 상호작용해야 하는 중요한 시점에 JavaScript가 스타일을 계산하고 DOM에 삽입하는 작업을 수행해야 합니다.
특히 규모가 큰 애플리케이션일수록 런타임에 부담을 주어 웹 페이지의 초기 로딩 속도 및 상호작용 가능 시간을 저하시킬 수 있습니다.
* **성능 저하** : 사용자가 페이지를 방문할 때마다, 또는 컴포넌트가 렌더링될 때마다 CSS를 동적으로 계산하고 주입하는 과정은 브라우저의 처리 시간을 추가로 요구합니다.
서비스의 규모가 커질 수록 더욱 두드러지는 성능 저하로 이어집니다.
* **캐싱의 어려움** : 동적으로 생성되는 클래스명이나 스타일 규칙은 정적인 CSS 파일에 비해 브라우저나 CDN에서 캐싱 효율을 떨어뜨릴 수 있습니다. 매번 새로운 스타일이 생성되면 브라우저는 이를 다시 파싱하고 적용해야 합니다.

### Zero-Runtime CSS
Zero-Runtime CSS는 이러한 CSS-in-JS 방식의 성능적 단점을 보완하기 위해 등장한 방식입니다.
**스타일 관련 작업을 런타임이 아닌, 빌드 타임에 미리 처리**하는 것입니다.

대표적인 라이브러리로 `Linaria` `vanilla-extract`등이 있습니다.

#### 동작 방식
1. 개발자가 스타일 코드를 작성하면 빌드 도구가 이를 분석합니다.
2. 분석된 스타일 정보를 기반으로 CSS규칙을 담은 정적인 .css 파일을 생성합니다.
3. 런타임에 스타일을 생성하는 로직이 담긴 JavaScript 코드는 최종 번들에서 제거되거나 최소화되고 HTML 요소에는 미리 정의된 정적 클래스명이 적용됩니다.

#### 장점
* **성능 향상** : 브라우저는 JavaScript 실행을 기다리지 않고 정적 CSS 파일을 바로 로드하고 파싱하여 렌더링합니다. 이는 FCP(First Contentful Paint), LCP(Largest Contentful Paint)와 같은 Web Vitals 지표에 기여합니다.
스타일 생성을 위한 JavaScript 실행 시간이 없으므로 TTI(Time To Interactive)가 빨리지고 메인 스레드 부담이 줄어듭니다. 
* **JavaScript 번들 사이즈 감소** : 최종 번들에서 .css 파일로 전환되기에 JavaScript 번들 사이즈가 감소하고 파일의 용량또한 로딩속도에 유의미한 차이가 있습니다.
* **효율적인 캐싱** : 정적 파일이 생성되므로 브라우저나 CDN을 통해 효과적으로 캐싱됩니다. 반복 방문 시 로딩속도를 더욱 빠르게 합니다.
* **FOUC 방지** : 스타일이 HTML과 함께 먼저 로드되므로 스타일이 적용되지 않은 컨텐츠가 잠깐 보이는 현상을 방지합니다.
* **서버 사이드 렌더링 친화적** : 빌드 시점에 CSS가 확정되므로 SSR이나 SSG 환경에서 별도의 복잡한 설정없이 스타일을 쉽게 적용합니다.

#### 고려사항
빌드 과정에서 CSS를 분석하고 생성하는 단계가 추가되므로 빌드 시간이 다소 늘어날 수 있습니다.
또한, 프로젝트에 도입하기 위해 번들러의 플러그인을 설정이 필요합니다.

